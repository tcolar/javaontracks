<project name="JavaOnTracks" default="jar" basedir=".">
    <description>build file for JavaOnTracks</description>
    
    <target name="clean">
        <delete dir="classes"/>
    </target>
    
    <target name="compile">
        <mkdir dir="classes"/>
        <!--<javac encoding="ISO-8859-1" target="1.4" source="1.4" srcdir="src" destdir="classes" debug="true" debuglevel="lines,vars,source">-->
        <javac encoding="ISO-8859-1" target="1.3" source="1.3" srcdir="src" destdir="classes" debug="true" debuglevel="source">
            <classpath>
                <filelist dir="lib">
                    <file name="servlet-api.jar"/>
                </filelist>
            </classpath>
        </javac>
    </target>
    
    <target name="jar" depends="clean,compile">
        <mkdir dir="dist"/>
        <delete file="dist/javaOnTracks.jar"></delete>
        <jar destfile="dist/javaOnTracks.jar">
            <fileset dir="classes"/>
        </jar>
    </target>
    
    <target name="dist" depends="javadoc,jar">
        <zip destfile="dist/javaOnTracks.zip">
            <fileset file="dist/javaOnTracks.jar"/>
        </zip>
        <zip destfile="dist/javaOnTracks-javadoc.zip">
            <fileset dir="." includes="javadoc/**"/>
        </zip>
    </target>
    
    <target name="test" depends="compile">
        <java classname="net.jot.testing.JOTTester">
            <classpath path="classes:/usr/share/java/postgresql-jdbc3-8.1.jar"/>
            <arg value="classes"/>
            <!--<arg value="-debug"/>-->
            <arg value="-selfTest"/>
            <!--<arg value="-outputTo=/tmp/jottest.html"/>-->
        </java>
    </target>
    
    <target name="javadoc">
        <!--<delete dir="javadoc" quiet="true"/>-->
        <mkdir dir="javadoc"/>
        <javadoc sourcepath="src" destdir="javadoc" packagenames="*" verbose="true">
            <classpath>
                <filelist dir="lib">
                    <file name="servlet-api.jar"/>
                </filelist>
            </classpath>
        </javadoc>
    </target>
    
    <target name="example.app.run" depends="compile">
        <java classname="com.jot.examples.movie.MainFrame" classpath="classes" fork="true">
        </java>
    </target>
    
</project>